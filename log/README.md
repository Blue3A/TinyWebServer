
同步/异步日志系统
===============
同步/异步日志系统主要涉及了两个模块，一个是日志模块，一个是阻塞队列模块,其中加入阻塞队列模块主要是解决异步写入日志做准备.
> * 自定义阻塞队列
> * 单例模式创建日志
> * 同步日志
> * 异步日志
> * 实现按天、超行分类

自定义阻塞队列
---------
STL中的queue是线程非安全的,子线程对queue队列做push操作，同时主线程对queue执行pop操作，则可能会发生异常。这里利用循环数组自定义阻塞队列,通过互斥锁和条件变量保证线程安全.

单例模式
-----------
日志模块主要采用多线程下安全的单例模式设计


同步日志
---------
当单条日志比较大的时候，同步模式会阻塞整个处理流程，那么应用能处理的并发能力将有所下降，尤其是在峰值的时候，写日志可能成为系统的瓶颈;服务崩溃或者重启服务的时候不会造成日志丢失
> * 同步日志在初始化日志函数时将阻塞队列大小设置为0
> * 当需要写入日志时,直接写入日志文件
> * 在需要输出日志的地方（如来源、错误信息等）直接使用
> * 有两种使用方式，一是直接使用对应的宏,如LOG_INFO和LOG_ERROR;二是使用实例的成员函数Log::get_instance()->write_log

异步日志
---------
异步的好处就是在峰值的时候能够平滑过渡，降低写日志的压力;缺点是在服务崩溃或者重启服务的时候可能会造成部分日志丢失.
> * 异步日志在初始化日志函数时需要指定>0的阻塞队列大小
> * 当需要写入日志时,将日志内容push进阻塞队列
> * 写线程从阻塞队列中取出任务写入日志文件

实现按天、超行分类
-----------
> * 服务器启动按当前时刻创建日志,前缀为时间,后缀为自定义log文件名
> * 记录创建日志的时间day和行数count
> * 日志写入前会判断当前day是否为创建日志的时间,行数是否超过最大行限制
> * 若为创建日志时间,写入日志,否则按当前时间创建新log,更新创建时间和行数
> * 若行数超过最大行限制,在当前日志的末尾加count/max_lines为后缀创建新log
